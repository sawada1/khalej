<template>
  <div style="min-height: 100vh">
    <div v-if="mainCar" class="container">
      <div class="product-page">
        <div class="row">
          <div class="col-12 col-xl-4 col-lg-4">
            <div class="details-container">
              <div class="comp-price">
                <span v-if="mainCar?.other_text_ar"> {{ locale == 'ar' ? mainCar?.other_text_ar : mainCar?.other_text_en }} </span>
                <span v-else> {{ $t(mainCar?.price_field_status) }} </span>
              </div>
              <h2 class="nameCar">{{ mainCar.name }}</h2>
              <div class="colors-container">
                <div v-if="mainCar?.price_field_status == 'show'" class="d-flex flex-column gap-4 stallment-price">
                  <span> {{ $t("price") }} </span>
                  <h5>{{ mainCar.price }} {{ $t("curr") }}</h5>
                </div>
                <div v-if="mainCar?.price_field_status == 'show'" class="seprator"></div>
                <div class="d-flex flex-column gap-4 main-colors">
                  <span> {{ $t("availColors") }} </span>
                  <div class="colors">
                    <div
                      v-for="(color, index) in mainCar.color"
                      :key="index"
                      class="color"
                      :style="{ backgroundColor: color.hex_code }"
                      @click="activeColor = index + 1"
                      :class="{
                        active: activeColor == index + 1,
                        'light-color': isLightColor(color.hex_code),
                      }"
                    >
                      <div class="act-color"></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="desc">
                <div class="d-flex align-items-center gap-3">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                  >
                    <path
                      fill-rule="evenodd"
                      clip-rule="evenodd"
                      d="M1 5C1 3.89543 1.89543 3 3 3H21C22.1046 3 23 3.89543 23 5V19C23 20.1046 22.1046 21 21 21H3C1.89543 21 1 20.1046 1 19V5ZM4 17C4 16.4477 4.44772 16 5 16H12C12.5523 16 13 16.4477 13 17C13 17.5523 12.5523 18 12 18H5C4.44772 18 4 17.5523 4 17ZM12 12C11.4477 12 11 12.4477 11 13C11 13.5523 11.4477 14 12 14H19C19.5523 14 20 13.5523 20 13C20 12.4477 19.5523 12 19 12H12ZM15 17C15 16.4477 15.4477 16 16 16H19C19.5523 16 20 16.4477 20 17C20 17.5523 19.5523 18 19 18H16C15.4477 18 15 17.5523 15 17ZM5 12C4.44772 12 4 12.4477 4 13C4 13.5523 4.44772 14 5 14H8C8.55228 14 9 13.5523 9 13C9 12.4477 8.55228 12 8 12H5Z"
                      fill="#23262F"
                    />
                  </svg>
                  <h6>{{ $t("desc") }}</h6>
                </div>
                <p>
                  {{ mainCar.description }}
                </p>
              </div>
              <div class="main-details">
                <div class="details">
                  <div class="detail">
                    <div class="d-flex align-items-center gap-3">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 20 20"
                        fill="none"
                      >
                        <path
                          d="M6.74464 3.65732C5.496 2.76194 3.71726 3.16802 2.99898 4.5246C2.59773 5.28245 2.62378 6.20963 3.06699 6.94437C3.67082 7.94622 4.88104 8.40317 6.0101 8.05569C7.07391 7.72855 7.78866 6.7716 7.78866 5.67445C7.78866 4.88018 7.39836 4.12615 6.74464 3.65732Z"
                          fill="#A7B9D0"
                        />
                        <path
                          d="M10.0757 7.07015L9.95751 6.98578C10.1925 6.1497 10.1925 5.25513 9.95751 4.41905L10.0761 4.33468C10.5056 4.02773 10.6289 3.45494 10.3633 3.00299L10.1852 2.69943C9.91957 2.24705 9.35338 2.06644 8.86826 2.27842L8.73328 2.33735C8.11319 1.71836 7.32579 1.27064 6.47413 1.05357L6.45904 0.91069C6.40298 0.39175 5.96055 0 5.42972 0H5.0731C4.54248 0 4.09984 0.391707 4.04378 0.91069L4.02869 1.05357C3.17703 1.27064 2.38963 1.71836 1.76953 2.33735L1.63456 2.27842C1.14944 2.06644 0.58325 2.24705 0.317619 2.69943L0.139526 3.00299C-0.126105 3.45494 -0.00277638 4.02773 0.427149 4.33468L0.545303 4.41905C0.310288 5.25513 0.310288 6.1497 0.545303 6.98578L0.427149 7.07015C-0.00277638 7.3771 -0.126105 7.94989 0.139526 8.40184L0.317619 8.7054C0.58325 9.15778 1.14944 9.33839 1.63456 9.12641L1.76953 9.06748C2.38963 9.68647 3.17703 10.1342 4.02869 10.3513L4.04421 10.4937C4.09984 11.0131 4.54227 11.4048 5.0731 11.4048H5.42972C5.96055 11.4048 6.40298 11.0131 6.45904 10.4941L6.47413 10.3513C7.32579 10.1342 8.11362 9.68647 8.73372 9.06748L8.86826 9.12641C9.35338 9.33839 9.91957 9.15778 10.1852 8.7054L10.3633 8.40184C10.6289 7.94989 10.5056 7.3771 10.0757 7.07015ZM6.21617 8.70303C4.77953 9.14527 3.24076 8.5632 2.47354 7.29027C1.371 5.46249 2.38221 3.07761 4.51446 2.58597C6.53808 2.1196 8.47869 3.62877 8.47869 5.67443C8.47865 7.06981 7.56942 8.2869 6.21617 8.70303Z"
                          fill="#A7B9D0"
                        />
                        <path
                          d="M19.5731 15.3613L19.3812 15.2244C19.6434 14.3056 19.6434 13.3203 19.3812 12.4016L19.5731 12.2642C20.0026 11.9573 20.1259 11.3845 19.8603 10.9325L19.6098 10.506C19.3441 10.0541 18.7784 9.87303 18.2933 10.0854L18.0751 10.1804C17.3955 9.49654 16.5283 9.00346 15.5899 8.76858L15.5654 8.53667C15.5093 8.01773 15.0669 7.62598 14.536 7.62598H14.035C13.5087 7.62598 13.0616 8.01408 13.0061 8.53667L12.9811 8.76858C12.0432 9.00346 11.1756 9.49654 10.496 10.1804L10.2778 10.0854C9.79264 9.87303 9.22688 10.0541 8.96125 10.506L8.71071 10.9325C8.44508 11.3845 8.56884 11.9573 8.99833 12.2642L9.18979 12.4016C8.92761 13.3203 8.92761 14.3056 9.18979 15.2244L8.99833 15.3613C8.56884 15.6687 8.44508 16.2411 8.71071 16.6935L8.96125 17.12C9.22688 17.5719 9.79307 17.7525 10.2782 17.5405L10.496 17.4452C11.1756 18.1294 12.0432 18.6221 12.9811 18.857L13.0061 19.0889C13.0617 19.6083 13.5041 20 14.035 20H14.536C15.0669 20 15.5093 19.6083 15.5654 19.0889L15.5899 18.857C16.5283 18.6221 17.3955 18.1294 18.0751 17.4452L18.2933 17.5405C18.7784 17.753 19.3446 17.5719 19.6098 17.12L19.8603 16.6935C20.1259 16.2411 20.0026 15.6687 19.5731 15.3613ZM15.3272 17.0827C13.7796 17.5591 12.1167 16.9348 11.2865 15.5575C10.0963 13.5841 11.1877 11.0094 13.4899 10.4786C15.7083 9.96727 17.7697 11.6387 17.7697 13.8129C17.7697 15.3194 16.7881 16.6334 15.3272 17.0827Z"
                          fill="#A7B9D0"
                        />
                        <path
                          d="M13.6477 11.139C11.7996 11.5652 10.9268 13.6306 11.8803 15.2115C12.5454 16.3147 13.8781 16.818 15.1215 16.4352C16.293 16.0749 17.0801 15.0211 17.0801 13.8129C17.0801 12.0478 15.4063 10.7335 13.6477 11.139Z"
                          fill="#A7B9D0"
                        />
                        <path
                          d="M19.1009 7.05828C17.0772 5.68623 14.5627 5.28943 12.2275 5.94044L12.3164 5.76432C12.4012 5.59656 12.3315 5.39301 12.1609 5.3097C11.9902 5.22647 11.7832 5.29498 11.6985 5.46271C11.2048 6.44047 11.2309 6.38603 11.2199 6.41838C11.1649 6.57767 11.2375 6.75446 11.3931 6.83035L12.3217 7.28354C12.4927 7.36698 12.6995 7.29795 12.7841 7.13053C12.8688 6.96276 12.7992 6.75921 12.6285 6.6759L12.4432 6.58547C14.5736 6.0003 16.8642 6.36572 18.7093 7.61674C18.7691 7.65727 18.8372 7.67673 18.9048 7.67673C19.2406 7.67673 19.3802 7.24767 19.1009 7.05828Z"
                          fill="#A7B9D0"
                        />
                        <path
                          d="M7.65714 13.0253C7.63877 13.0092 7.7188 13.0693 6.58625 12.2331C6.43386 12.1206 6.21764 12.151 6.10324 12.3008C5.98884 12.4505 6.01967 12.6632 6.17202 12.7756L6.62657 13.1111C4.98945 13.4007 3.30364 13.1626 1.80985 12.4195C1.63991 12.335 1.43232 12.402 1.34629 12.5691C1.26031 12.7362 1.3284 12.9403 1.49838 13.0249C3.08523 13.8141 4.88285 14.0875 6.65335 13.7948L6.40488 14.1538C6.24804 14.3804 6.41631 14.6839 6.68974 14.6839C6.80009 14.6839 6.9085 14.6319 6.97525 14.5355C7.77012 13.387 7.74493 13.4402 7.76477 13.3516C7.79013 13.2389 7.75528 13.111 7.65714 13.0253Z"
                          fill="#A7B9D0"
                        />
                      </svg>
                      <span> {{ $t("engineType") }} </span>
                    </div>
                    <h6>{{ mainCar.gear_shifter }}</h6>
                  </div>
                  <div class="detail">
                    <div class="d-flex align-items-center gap-3">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="20"
                        height="20"
                        viewBox="0 0 20 20"
                        fill="none"
                      >
                        <path
                          d="M13.9582 2.96663V1.66663C13.9582 1.32496 13.6749 1.04163 13.3332 1.04163C12.9915 1.04163 12.7082 1.32496 12.7082 1.66663V2.91663H7.29153V1.66663C7.29153 1.32496 7.0082 1.04163 6.66653 1.04163C6.32487 1.04163 6.04153 1.32496 6.04153 1.66663V2.96663C3.79153 3.17496 2.69987 4.51663 2.5332 6.50829C2.51653 6.74996 2.71653 6.94996 2.94987 6.94996H17.0499C17.2915 6.94996 17.4915 6.74163 17.4665 6.50829C17.2999 4.51663 16.2082 3.17496 13.9582 2.96663Z"
                          fill="#A7B9D0"
                        />
                        <path
                          d="M16.6667 8.19995H3.33333C2.875 8.19995 2.5 8.57495 2.5 9.03328V14.1666C2.5 16.6666 3.75 18.3333 6.66667 18.3333H13.3333C16.25 18.3333 17.5 16.6666 17.5 14.1666V9.03328C17.5 8.57495 17.125 8.19995 16.6667 8.19995ZM7.675 15.1749C7.59167 15.2499 7.5 15.3083 7.4 15.35C7.3 15.3916 7.19167 15.4166 7.08333 15.4166C6.975 15.4166 6.86667 15.3916 6.76667 15.35C6.66667 15.3083 6.575 15.2499 6.49167 15.1749C6.34167 15.0166 6.25 14.8 6.25 14.5833C6.25 14.3666 6.34167 14.15 6.49167 13.9916C6.575 13.9166 6.66667 13.8583 6.76667 13.8166C6.96667 13.7333 7.2 13.7333 7.4 13.8166C7.5 13.8583 7.59167 13.9166 7.675 13.9916C7.825 14.15 7.91667 14.3666 7.91667 14.5833C7.91667 14.8 7.825 15.0166 7.675 15.1749ZM7.85 11.9833C7.80833 12.0833 7.75 12.175 7.675 12.2583C7.59167 12.3333 7.5 12.3916 7.4 12.4333C7.3 12.475 7.19167 12.5 7.08333 12.5C6.975 12.5 6.86667 12.475 6.76667 12.4333C6.66667 12.3916 6.575 12.3333 6.49167 12.2583C6.41667 12.175 6.35833 12.0833 6.31667 11.9833C6.275 11.8833 6.25 11.775 6.25 11.6666C6.25 11.5583 6.275 11.45 6.31667 11.35C6.35833 11.25 6.41667 11.1583 6.49167 11.075C6.575 11 6.66667 10.9416 6.76667 10.9C6.96667 10.8166 7.2 10.8166 7.4 10.9C7.5 10.9416 7.59167 11 7.675 11.075C7.75 11.1583 7.80833 11.25 7.85 11.35C7.89167 11.45 7.91667 11.5583 7.91667 11.6666C7.91667 11.775 7.89167 11.8833 7.85 11.9833ZM10.5917 12.2583C10.5083 12.3333 10.4167 12.3916 10.3167 12.4333C10.2167 12.475 10.1083 12.5 10 12.5C9.89167 12.5 9.78333 12.475 9.68333 12.4333C9.58333 12.3916 9.49167 12.3333 9.40833 12.2583C9.25833 12.1 9.16667 11.8833 9.16667 11.6666C9.16667 11.45 9.25833 11.2333 9.40833 11.075C9.49167 11 9.58333 10.9416 9.68333 10.9C9.88333 10.8083 10.1167 10.8083 10.3167 10.9C10.4167 10.9416 10.5083 11 10.5917 11.075C10.7417 11.2333 10.8333 11.45 10.8333 11.6666C10.8333 11.8833 10.7417 12.1 10.5917 12.2583Z"
                          fill="#A7B9D0"
                        />
                      </svg>
                      <span> {{ $t("year1") }} </span>
                    </div>
                    <h6>{{ mainCar.year }}</h6>
                  </div>
                </div>
                <div class="details">
                  <div class="detail">
                    <div class="d-flex align-items-center gap-3">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="14"
                        height="20"
                        viewBox="0 0 14 20"
                        fill="none"
                      >
                        <path
                          d="M13.2501 0.78125H6.93764C6.85879 0.781426 6.78123 0.801228 6.71194 0.838872C6.64265 0.876516 6.58383 0.930816 6.54077 0.996875L0.968895 9.6875C0.921477 9.7595 0.894691 9.84312 0.891447 9.92928C0.888204 10.0154 0.908625 10.1008 0.950495 10.1762C0.992365 10.2516 1.05408 10.314 1.12895 10.3568C1.20381 10.3995 1.28896 10.421 1.37515 10.4187H5.53765L1.74702 18.5438C1.70126 18.6435 1.69198 18.7562 1.7208 18.8622C1.74963 18.9681 1.81472 19.0606 1.90473 19.1234C1.99474 19.1863 2.10396 19.2156 2.21335 19.2061C2.32273 19.1967 2.42534 19.1492 2.50327 19.0719L13.3908 8.19375C13.4548 8.12764 13.498 8.04426 13.5153 7.95388C13.5325 7.86349 13.5229 7.77005 13.4877 7.68504C13.4525 7.60003 13.3932 7.52716 13.3171 7.47541C13.2411 7.42366 13.1515 7.39527 13.0595 7.39375H9.9939L13.647 1.49687C13.6909 1.42599 13.7152 1.34468 13.7172 1.26132C13.7192 1.17796 13.6989 1.09558 13.6585 1.02266C13.618 0.949736 13.5589 0.888923 13.4871 0.846489C13.4153 0.804054 13.3335 0.781534 13.2501 0.78125Z"
                          fill="#A7B9D0"
                        />
                      </svg>
                      <span> {{ $t("gazType") }} </span>
                    </div>
                    <h6>{{ mainCar.fuel_type }}</h6>
                  </div>
                  <div class="detail">
                    <div class="d-flex align-items-center gap-3">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                      >
                        <path
                          d="M18.7427 16.5632C18.6518 16.4801 18.5446 16.4167 18.4279 16.3771C18.3112 16.3375 18.1876 16.3224 18.0649 16.3329L10.0119 17.0335C10.2389 16.2486 10.6216 14.6108 10.2487 13.4919V13.4627C9.91861 12.767 9.52447 12.1036 9.07136 11.4811C8.54172 10.3711 8.38583 9.11944 8.62704 7.91348C8.71136 7.58916 9.09082 5.87997 8.3319 5.43564C8.20674 5.3589 8.05924 5.32688 7.91352 5.34483L5.60109 5.51348C5.41443 5.53873 5.24476 5.63519 5.12758 5.78267C5.06986 5.85562 5.02747 5.93947 5.00295 6.02919C4.97843 6.11892 4.97228 6.21267 4.98488 6.30483L6.39893 18.4443C6.46066 19.0021 6.72684 19.5174 7.14609 19.8905C7.56535 20.2636 8.10796 20.4682 8.6692 20.4648H8.6919L16.4043 20.4389H16.8973C17.3374 20.4428 17.7676 20.3077 18.1265 20.0529C18.4029 19.8441 18.6279 19.5748 18.7842 19.2656C18.9404 18.9564 19.0239 18.6156 19.0281 18.2692V17.2054C19.0275 17.0844 19.0018 16.9649 18.9527 16.8544C18.9035 16.7439 18.8321 16.6447 18.7427 16.5632ZM6.86596 8.87348H6.82704C6.71963 8.87311 6.61622 8.83268 6.53705 8.76011C6.45787 8.68753 6.40862 8.58802 6.39893 8.48105L6.30488 7.39781C6.29458 7.33905 6.29658 7.27879 6.31076 7.22085C6.32494 7.16291 6.35098 7.10853 6.38724 7.06117C6.42349 7.0138 6.46918 6.97447 6.52142 6.94565C6.57365 6.91684 6.63129 6.89918 6.6907 6.89378C6.75011 6.88838 6.80999 6.89536 6.86656 6.91428C6.92314 6.9332 6.97517 6.96365 7.01938 7.0037C7.06358 7.04375 7.099 7.09254 7.12339 7.14698C7.14779 7.20141 7.16062 7.26032 7.16109 7.31997L7.25515 8.40321C7.26095 8.45973 7.25545 8.51684 7.23896 8.57121C7.22246 8.62558 7.19531 8.67612 7.15909 8.7199C7.12287 8.76367 7.07829 8.79979 7.02796 8.82616C6.97764 8.85253 6.92256 8.86861 6.86596 8.87348Z"
                          fill="#A7B9D0"
                        />
                        <path
                          d="M7.26161 4.65084L7.18701 4.72544L5.53945 4.8876L5.4908 4.59895C4.90053 0.908141 4.90053 0.908141 5.18918 0.801114C5.42893 0.702199 5.6855 0.650443 5.94485 0.648682H6.03242C6.53456 0.682187 7.0089 0.891281 7.37238 1.23934C7.73586 1.58741 7.9653 2.05225 8.02053 2.55247C8.05014 2.93605 7.99779 3.32155 7.86694 3.68335C7.73609 4.04514 7.52974 4.37494 7.26161 4.65084Z"
                          fill="#A7B9D0"
                        />
                        <path
                          d="M16.4008 21.0811H8.68517H8.56842V22.4951C8.56713 22.6063 8.58776 22.7166 8.62911 22.8198C8.67047 22.923 8.73175 23.017 8.80945 23.0965C8.88715 23.176 8.97975 23.2395 9.08197 23.2832C9.18418 23.3269 9.29401 23.3501 9.40517 23.3513H15.856C16.0794 23.348 16.2928 23.2577 16.4508 23.0997C16.6089 22.9417 16.6991 22.7283 16.7025 22.5048V21.0811H16.4008Z"
                          fill="#A7B9D0"
                        />
                      </svg>
                      <span> {{ $t("seats") }} </span>
                    </div>
                    <h6>{{ mainCar.seats }}</h6>
                  </div>
                </div>
              </div>
              <div class="btns-container">
                <button @click="openPopup = !openPopup" class="buy">
                  {{ $t("orderHome") }}
                </button>
                <div class="icons">
                  <div
                    @click="
                      addFavFunc(mainCar.id), (mainCar.is_fav = !mainCar.is_fav)
                    "
                    class="icon"
                  >
                    <svg
                      v-if="mainCar.is_fav"
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        d="M12 4.80957C10.8321 3.6888 9.24649 3 7.5 3C3.91015 3 1 5.91015 1 9.5C1 15.8683 7.97034 19.385 10.8138 20.5547C11.5796 20.8697 12.4204 20.8697 13.1862 20.5547C16.0297 19.385 23 15.8682 23 9.5C23 5.91015 20.0899 3 16.5 3C14.7535 3 13.1679 3.6888 12 4.80957Z"
                        fill="#ED3F3F"
                      />
                    </svg>
                    <svg
                      v-else
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <path
                        d="M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z"
                        stroke="#A7B9D0"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </div>
                  <div class="icon" @click="shareIcons = !shareIcons">
                    <svg
                      v-if="!shareIcons"
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                    >
                      <g clip-path="url(#clip0_1_2625)">
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M24.0005 15.7794V19.4971C23.9998 20.2494 23.7007 20.9706 23.1687 21.5025C22.6368 22.0345 21.9155 22.3335 21.1632 22.3342H2.83681C2.08465 22.3332 1.36358 22.034 0.831702 21.5021C0.299824 20.9703 0.000553537 20.2492 -0.000488281 19.4971V15.7794C0.000865842 15.631 0.0607577 15.4892 0.166157 15.3847C0.271556 15.2803 0.413935 15.2217 0.562316 15.2217C0.710698 15.2217 0.853077 15.2803 0.958476 15.3847C1.06388 15.4892 1.12377 15.631 1.12512 15.7794V19.4971C1.12547 19.951 1.30591 20.3862 1.62684 20.7071C1.94776 21.0281 2.38293 21.2086 2.83681 21.209H21.1632C21.6171 21.2086 22.0523 21.0281 22.3733 20.7072C22.6943 20.3862 22.8747 19.951 22.8751 19.4971V15.7794C22.8764 15.631 22.9363 15.4892 23.0417 15.3847C23.1471 15.2803 23.2895 15.2217 23.4379 15.2217C23.5863 15.2217 23.7286 15.2803 23.834 15.3847C23.9394 15.4892 23.9993 15.631 24.0007 15.7794H24.0005ZM14.1307 4.75439C12.1011 6.16534 10.4664 8.07242 9.38252 10.294C8.29861 12.5156 7.8015 14.9777 7.93854 17.4457C7.94578 17.5791 8.00029 17.7054 8.0923 17.8022C8.18431 17.8989 8.30779 17.9597 8.44057 17.9736C8.46045 17.9754 8.48037 17.9769 8.50025 17.9769C8.62387 17.9767 8.74394 17.9356 8.84189 17.8602C8.93984 17.7848 9.0102 17.6792 9.04207 17.5597C10.2608 13.0185 14.0267 10.3349 17.8658 11.2254L19.3056 13.7203C19.3592 13.8122 19.4376 13.8872 19.5319 13.9366C19.6261 13.986 19.7324 14.0078 19.8385 13.9995C19.9445 13.9915 20.0461 13.9532 20.1311 13.8894C20.2161 13.8255 20.2811 13.7387 20.3184 13.6391L23.9629 4.06129C23.9929 3.98329 24.0051 3.89957 23.9986 3.81625C23.9921 3.73294 23.967 3.65213 23.9252 3.57974C23.8835 3.50735 23.8261 3.44521 23.7572 3.39785C23.6884 3.3505 23.6098 3.31913 23.5272 3.30604L13.412 1.67292C13.3068 1.65539 13.1988 1.66819 13.1006 1.70981C13.0024 1.75143 12.9181 1.82016 12.8576 1.90795C12.797 1.99574 12.7627 2.09896 12.7587 2.20553C12.7547 2.3121 12.7811 2.41762 12.8348 2.50973L14.1307 4.75439Z"
                          fill="#A7B9D0"
                        />
                      </g>
                      <defs>
                        <clipPath id="clip0_1_2625">
                          <rect width="24" height="24" fill="white" />
                        </clipPath>
                      </defs>
                    </svg>
                    <svg
                      v-else
                      xmlns="http://www.w3.org/2000/svg"
                      width="20"
                      height="20"
                      viewBox="0 0 17 16"
                      fill="none"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M2.23137 1.29289C2.62189 0.902369 3.25506 0.902369 3.64558 1.29289L8.93848 6.58579L14.2314 1.29289C14.6219 0.902369 15.2551 0.902369 15.6456 1.29289C16.0361 1.68342 16.0361 2.31658 15.6456 2.70711L10.3527 8L15.6456 13.2929C16.0361 13.6834 16.0361 14.3166 15.6456 14.7071C15.2551 15.0976 14.6219 15.0976 14.2314 14.7071L8.93848 9.41421L3.64558 14.7071C3.25506 15.0976 2.62189 15.0976 2.23137 14.7071C1.84085 14.3166 1.84085 13.6834 2.23137 13.2929L7.52426 8L2.23137 2.70711C1.84085 2.31658 1.84085 1.68342 2.23137 1.29289Z"
                        fill="#A7B9D0"
                      />
                    </svg>
                    <div v-if="shareIcons" class="share-box">
                      <a
                        target="_blank"
                        :href="`https://t.me/share/url?url=${theRoute}`"
                      >
                        <img src="~/assets/imgs/social1.svg" alt="" />
                      </a>
                      <a
                        target="_blank"
                        :href="`https://www.facebook.com/sharer/sharer.php?${theRoute}`"
                      >
                        <img src="~/assets/imgs/social2.svg" alt="" />
                      </a>
                      <a
                        target="_blank"
                        :href="`https://twitter.com/intent/tweet?url=${theRoute}`"
                      >
                        <img src="~/assets/imgs/social3.svg" alt="" />
                      </a>

                      <a
                        target="_blank"
                        :href="`https://wa.me/?text=${theRoute}/`"
                      >
                        <img src="~/assets/imgs/social4.svg" alt="" />
                      </a>
                      <button @click="copyToClipboard2()">
                        <img
                          v-if="checkCopy"
                          src="~/assets/imgs/social5.svg"
                          alt=""
                        />
                        <svg
                          v-else
                          xmlns="http://www.w3.org/2000/svg"
                          fill="#fff"
                          height="20"
                          width="20"
                          viewBox="0 0 448 512"
                        >
                          <path
                            d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"
                          />
                        </svg>
                      </button>
                      <!-- <i @click="closeShare()" class="fa-solid fa-xmark"></i> -->
                    </div>
                  </div>
                </div>
              </div>
              <div class="main-seperator"></div>

              <div class="change-btns">
                <button
                  :class="{ active: activeBtn == 1 }"
                  @click="activeBtn = 1"
                >
                  {{ $t("abilites") }}
                </button>
                <button
                  :class="{ active: activeBtn == 2 }"
                  @click="activeBtn = 2"
                >
                  {{ $t("features") }}
                </button>
              </div>
              <v-expansion-panels multiple v-if="activeBtn == 1">
                <v-expansion-panel v-for="item in mainCar.possibilities">
                  <v-expansion-panel-title
                    collapse-icon="mdi-minus"
                    expand-icon="mdi-plus"
                  >
                    <div class="custom-title">
                      <img :src="item.icon" alt="" width="80" />

                      <span> {{ item.title }} </span>
                    </div>
                  </v-expansion-panel-title>
                  <v-expansion-panel-text>
                    {{ item.description }}
                  </v-expansion-panel-text>
                </v-expansion-panel>
              </v-expansion-panels>
              <v-expansion-panels multiple v-if="activeBtn == 2">
                <v-expansion-panel v-for="item in mainCar.features">
                  <v-expansion-panel-title
                    collapse-icon="mdi-minus"
                    expand-icon="mdi-plus"
                  >
                    <div class="custom-title">
                      <img :src="item.icon" alt="" width="80" />
                      <span> {{ item.title }} </span>
                    </div>
                  </v-expansion-panel-title>
                  <v-expansion-panel-text>
                    {{ item.description }}
                  </v-expansion-panel-text>
                </v-expansion-panel>
              </v-expansion-panels>
            </div>
          </div>
          <div class="col-12 col-xl-8 col-lg-8 bg-dange">
            <swiper
              :spaceBetween="30"
              :pagination="{ clickable: true }"
              :modules="[SwiperPagination, SwiperAutoplay]"
              class="mySwiper"
            >
              <swiper-slide v-for="i in mainCar.images">
                <a
                  :data-src="i"
                  href="javascript:;"
                  data-fancybox="gallery"
                  data-caption="Gallery A #1"
                >
                  <img :src="i" alt="car" />
                </a>
              </swiper-slide>
            </swiper>
          </div>
        </div>
      </div>
    </div>
    <popup-one :openPopup="openPopup" @update="handleUpdatePopup"></popup-one>

    <loading v-if="isLoading" />
  </div>
</template>

<script setup>
import "swiper/css";
import { Fancybox } from "@fancyapps/ui";
import "@fancyapps/ui/dist/fancybox/fancybox.css";
import carPageImage from "../assets/imgs/carPage.png";
import "swiper/css/pagination";
import { useCarStore } from "@/stores/car";
let store = useCarStore();
let activeColor = ref(1);
let activeBtn = ref(2);
let openPopup = ref(false);
const route = useRoute();
let isLoading = ref(store.isLoading);
let id = ref(route.query.id);
store.getCar(id.value);
let mainCar = ref();
let favBtn = ref();
let { locale } = useI18n();
let shareIcons = ref(false);
let theRoute = ref("");

let checkCopy = ref(true);

function copyToClipboard2() {
  if (process.client) {
    checkCopy.value = false;
    const clipBoard = navigator.clipboard;
    clipBoard.writeText(theRoute.value).then(() => {});

    setTimeout(() => {
      checkCopy.value = true;
    }, 1000);
  }
}

const addFavFunc = (id) => {
  favBtn.value = !favBtn.value;
  store.AddFav(id, favBtn.value);
};
const hexToRgb = (hex) => {
  // Remove '#' from hex string
  hex = hex.replace(/^#/, "");
  // Parse the hex string to get RGB values
  let bigint = parseInt(hex, 16);
  let r = (bigint >> 16) & 255;
  let g = (bigint >> 8) & 255;
  let b = bigint & 255;
  return { r, g, b };
};
const isLightColor = (hex) => {
  // Convert hex color to RGB
  let rgb = hexToRgb(hex);
  // Calculate the luminance of the color
  let luminance = (0.299 * rgb.r + 0.587 * rgb.g + 0.114 * rgb.b) / 255;
  // If luminance is greater than 0.5, color is considered light
  return luminance > 0.5;
};

const handleUpdatePopup = (newState) => {
  openPopup.value = newState;
};

watch([() => store.car, store.isLoading], ([val1, val2]) => {
  mainCar.value = val1;
  favBtn.value = mainCar.value?.is_fav;
  isLoading.value = val2;
});

useSeoMeta({
  title: locale.value == "ar" ? " السيارة " : " car ",
  ogTitle: "My Amazing Site",
  description: "This is my amazing site, let me tell you all about it.",
  ogDescription: "This is my amazing site, let me tell you all about it.",
});
onMounted(() => {
  theRoute.value = window.location.href;
  Fancybox.bind("[data-fancybox]", {
    // Custom options for all galleries
  });
});
</script>
